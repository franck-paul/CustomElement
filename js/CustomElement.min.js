class DotclearRest{servicesUri="index.php?rest&";run(e,t=e=>{},s=e=>{console.log(e)},o={}){const n=new URL(this.servicesUri,globalThis.location.origin+globalThis.location.pathname);o.f=e;const a=new URLSearchParams(o);n.search+=a.toString(),fetch(n,{method:"GET"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.text()}).then(e=>t(e)).catch(e=>s(e))}}class DotclearReleaseStableVersion extends HTMLElement{constructor(){super();const e=new DotclearRest;e&&e.run("getReleaseStableVersion",e=>{const t=JSON.parse(e);if(!t?.success||!t?.payload.ret)return;const s=this.attachShadow({mode:"open"}),o=document.createElement("span");o.textContent=t.payload.text,s.appendChild(o)},e=>{},{json:1})}}customElements.define("dotclear-release-stable-version",DotclearReleaseStableVersion);
