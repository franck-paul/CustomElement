class DotclearRest{constructor(){this.servicesUri="index.php?rest&"}run(e,t=e=>{},s=e=>{console.log(e)},o={}){const a=new URL(this.servicesUri,globalThis.location.origin+globalThis.location.pathname);o.f=e;const n=new URLSearchParams(o);a.search=a.search+n.toString(),fetch(a,{method:"GET"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.text()}).then(e=>t(e)).catch(e=>s(e))}}class DotclearReleaseStableVersion extends HTMLElement{constructor(){super();const e=new DotclearRest;e&&e.run("getReleaseStableVersion",e=>{const t=JSON.parse(e);if(t?.success&&t?.payload.ret){const e=this.attachShadow({mode:"open"}),s=document.createElement("span");s.textContent=t.payload.text,e.appendChild(s)}},e=>{},{json:1})}}customElements.define("dotclear-release-stable-version",DotclearReleaseStableVersion);
