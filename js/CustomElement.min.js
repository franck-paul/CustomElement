class DotclearRest{servicesUri="index.php?rest&";constructor(){this.servicesUri=(e=>{const t=document.getElementById(`${e}-data`);if(t)try{return JSON.parse(t.textContent)}catch(e){console.log(e)}return{}})("custom-element").uri}run(e,t=e=>{},s=e=>{console.log(e)},n={}){const a=new URL(this.servicesUri,globalThis.location.origin+globalThis.location.pathname);n.f=e;const o=new URLSearchParams(n);a.search+=o.toString(),fetch(a,{method:"GET"}).then(e=>{if(!e.ok)throw new Error(e.statusText);return e.text()}).then(e=>t(e)).catch(e=>s(e))}}class DotclearReleaseStableInfo{constructor(e){this.fn=e}run(e){const t=new DotclearRest;t&&t.run(this.fn,t=>{const s=JSON.parse(t);if(!s?.success||!s?.payload.ret)return;const n=e.attachShadow({mode:"open"}),a=document.createElement("span");a.textContent=s.payload.text,n.appendChild(a)},e=>{},{json:1})}}class DotclearReleaseStableVersion extends HTMLElement{constructor(){super(),new DotclearReleaseStableInfo("getReleaseStableVersion").run(this)}}class DotclearReleaseStablePhpMin extends HTMLElement{constructor(){super(),new DotclearReleaseStableInfo("getReleaseStablePhpMin").run(this)}}customElements.define("dotclear-release-stable-version",DotclearReleaseStableVersion),customElements.define("dotclear-release-stable-phpmin",DotclearReleaseStablePhpMin);
